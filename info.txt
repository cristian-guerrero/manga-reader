dependecias para linux:   
- libgtk-3: sudo apt install libgtk-3-dev
- libwebkit: sudo apt install libwebkit2gtk-4.1-dev

-----------------------------------------------------------------------------
vamos a crear un visor de manga

stack propuest con wails , React + Vite,  Tailwind CSS, Framer Motion, Canvas API para entorno desktop
ract-virtualized para carpetas con cientos de imagenes

Caracteristicas:
- Visor vertical y lateral
- Lista de capitulos visto, lista de capitulos en carpeta seleccionada
- guardar el pundo donde se termino de ver la ultima imagen cuando se abra desde la lista de capitulos visto (historial)
- debe ser multi lenguaje (ingles, español, para empezar) y facil de hacer traducciones,
- debe poderse actualizar (si es posible realizar actualizaciones al vuelo del front excelente)
- debe ser portable
- debe ser multiplataforma (windows, linux, mac)
- debe verse espectacular pero profesional
- con temas configurables, (centralizaso para poder agregar mas o que el usuario pueda agregarlos)
- debe poderse elegir en vista lateral si se ve una imagen o desktop
- debe poderse elegir en vertical (escroll infinito) determinar que porcentaje del ancho de la venta ocupa
- debe tener boton de panico, que cuando se presione por ejemplo: escape, deje de mostrar imagenes o vuelva a la pantalla de inicio
- debe tener selector de carpetas (dialogo)
- debe poderse eliminar carpetas de la lista, (las carpetas funcionarian como capitlos por ahora porque solo es para imagenes)
- debe poder leer los formatos de imagenes mas populares (png, jpg, jpeg, webp, gif, bmp, tiff, svg)
-debe tener una pantalla de configuracion
------------------------------------------------------------
Caracteristicas adicionales:
- se debe tener un menu en la carpeta que permita entrar a una previa de miniaturas de las carpetas
    imagenes y poderlas ordenar, aparte del ordern por defecto poder arrastrarlas y ordenar las imagenes
- el menu lateral debe compirmiser para dejar el mayor espacio posible para las imagenes you\
    quedar en forma de iconos
- la barra superior de la ventana debe tomar el tema (como lo hace visual code)
- se puede hacer zoom pan a las imagenes
- el ordenado de imagenes debe persistir pero se puede resetear a el orden origina.

- la estructura del proyecto debe quedar con buenas practivas de programacion
-documentacion clara de desarrollo y build y documentacion de uso de la app 
-------------------------------------------------------------------------------
Caracteristicas adicionales 2:
- permitir drag and drop en la app para agregar carpetas
- tener la opcion de activar o desactivar el hisotiria
- separar el historial de la lista de carpetas (si se elimina algo de la lista historia, la carpeta no se va)
-si existen imagenes pequenas en la carpeta, tener un slider de configuracion (para ya sea por tamaño en kb o en pixeles poder filtrar las imagenes)
- que el zoom en vertical se pueda hacer con pitch to zoom (ademas del slider)
- que el home que tenemos ahora no esta hacienod nada, sea el visor, o sea que pueda
     ir por a otra vista, pero continuar viendo en el home lo que se estaba viendo o se 
    seleccione nuevo en la lista de carpetas o historial
- 
----------------------------------------------------------------
careristicas adicionales 3: [DONE]
- pendiente de viabilidad
- crear una nueva seccion de series
- cuando se agregue una carpeta y tenga subcarpetas agregarlas como carpetas
-tener un nuevo submenu que tenga la lista de carpetass agregadas y sus subcarpetas seran 
     caapitulos como una serie 
- al agregar una carpeta con subcarpetas en el nuevo menu de series, se verifica si en la carpeta
    principal tenga alguna imagen y se crea el thumbnail apartir de esa, o si no de la primera
    subcarpeta que tenga una imagen (verificar el tamaño de la imagen de la carpeta principal, si exixte,
    puede ya ser un thumbnail verificar por tamaño) (solo agregar subcarpetas que tengan imagenes)
- el funcionamiento del nuevo menu de series se aplica cuando se agregue carpeta del boton de add folder
    o cuando se agregue con el drag and drop y este activo el toggle de add dropped folders to library and history
    si esta desactivado realizar el comportamiento actual de inciar el visualizador sin agregar a ninguna lista
    y sin verificar si hay subcarpetas
----------------------------------------------------------
cambios adicionales: [DONE]
- el boton de panico lleva a la pantalla de configuracion
- cada una de las secciones tien un boton de borrar todo como el de clear history
- si se agrega una carpeta con subcarpetas (serie) y despues se agrega una de sus subcarpetas
    esta subcarpeta se debe agregar a la lista de carpetas (sin modificar el comportamiento de seriees)
- rediseño visual moderno (fusión sidebar/titlebar con esquinas redondeadas)
-------------------------------------------------------------------------------
caracteristicas adicionales 4:
- verificar viabilidad sin dependencias externas del sistema
- poder arrastrar zip o rar y hacer la funcionalidad como si se arrastrara una carpeta, guardar las imagenes temporales
- si existen estas imagenes temporales al eliminar la carpeta o la serie se deben eliminar de disco, solo cuando cuando son temporales creadas 
    por la extraccionde zip o rar

-- Mejoras de rendimiento:
- quitar la conversion a base64 de las imagenes para el thumbnail (ok)
- quitar la conversion a base64 de las imagenes para el visor (ok)
- revisar si la libreria de virtualizacion tiene alguna forma de optimizar el rendimiento (o si hay opciones) (ok)
- revisar las animaciones de framer motion para optimizarlas (pendiente)
- agregar compatibilidad con imagen avif (ok)
- cuando la aplicacion incie regrese a la vista en la cual se estaba al salir (las vistas principales como home, series, folders, etc ) (ok)

-caracteristicas adicionales 5:
- el visor vertica y el lateral deben permitir ir al siguente o al anterior capitulo si es una serie (ok)

caracteristicas adicionales 6:
- Vamosos a agregar una nueva vista que nos permita explorar las carpetass con imagenes de
    de una carpeta base, teniendo en cuenta que esta carpeta base puede tener imagenes y a su vezz
    subcarpetas con imagenes y asi.
- el eplorador de esta nueva vista es idependiente de la lista de carpetas y de la lista de series 
    (asi como la lista de carpetas es idependiente de la lista de series)
- debe tenr un boton para agregar carpeta base y otra pera eliminarla(de la lista no del disco)
- el menu se llama explorer 
- verificar que se esten creando las traducciones y si no estan crearlas (botones menus dialogos etc)
- en la configuracion vamos a crear un menu que nos permita seleccionar o no los menus que se quieren ver
    por ejemplo un usuario solo quier ver el explorer y ocultar las otras opciones
    o por ejemplo no se quier ver ninguna opcion en el menu y se quier user la app solo como visor anonimo
    como se hace ahora con el drag an drop cuando el toogle:Add dropped folders to library & history esta off
    cuando se descelecicone todas las opociones del menu quedaria la app solo como visor sin guardar ningun historial
- vamos a modularizar el codigo de la app para que al agregar nuevas funcionalidades no se quiebre el codigo (existente) 
    se puede tener modulos compartidos, (ejemplo de modulos, folders, series, history, etc)

optimizaciones:
- validar como se estan cargando las imagenes en el visor (ok)

caracteristicas adicionales 7:
- vamos a crear un menu (download ) que nos permita descargar imagenes de mangas de diferentes sitios web con diferentes algoritmos
    definidos en su propio modulo y aca algoritmo en su propio archivo (algoritmo representa a sitio web)
- esta nueva vista nos va a permitir que cuando el usuario copia el portapapeles copiar la url
- esta nueva vista nos va a permitir copiar el url en un input
- esta nueva vista nos va a permitir activar o desactivar el copiado directo desde el portapapeles
- esta nueva vista nos va a permitir seleccionar la carpeta a la que se va a descargar las imagenes
- la funcionalidad por defecto creara una carpeta de descargas en el directorio de la app (downloads)
- esta carpeta de descargas estar ordenada por algoritmo (sitio web), adentro la serie si se puede y los capitulos
- si no se puede por serie se descargan directamente los capitulos\
- si es posible nos va a permitir configurar como se quiere que quede el nombre de la carpeta (por ejemplo ponerle el id de hitomi.la asi   nombre_manga (id_manga))
- las imagenes deben quedar en el orden correcto numeradas (1.jpg, 2.jpg, 3.jpg, etc)
- cuando se pegue direactamente del portapapeles se debe inciar el proceso de descarga, validando si existe el algorimo para esa descarga
- cuando se pegue la url debe existir un boton de descarga
- debe aparecer la lista de descargas con un texto que indique de donde se descargo,
- la lista de descargas debe porde borrarse sin borrar el contenido de la carpeta de descargas.
- los algoritmos de prueba estan en la carpeta go-files (verificar el funcionamiento)
- de los algoritmos de prueba vamos a integrar en un principio (hitomi.la, zontatmo, manhwaweb)
- validar la viaabilidad de la integracion de los algorimos propuestos primero, 
- validar que nuevas dependencias se necesitan (si es necesario) de los nuevos algoritmos propuestos (hitomi.la, zontatmo, manhwaweb)
- esta funcionalidad debe ser independiente de los otros modulos y no interrumpir con su funcionamiento
- debe existir un boton que permita abrir la carpeta con el explorador de archivos del sistema (find location)

-------------------------------------------------------------
- mejoras y carateristicas adicionales para el modulo de downloader:
- Poder descargar mangas completos de zonatmo.com (mostrar un mensaje al usuario informandole que se va a descaregar todos los
    capitulos de la serie) link de ejemplo https://zonatmo.com/library/manga/87200/sonobisquedollwakoiwosuruchu

- Poder descargar mangas completos de manhwaweb (mostrar un mensaje al usuario informandole que se va a descaregar todos los
    capitulos de la serie) link de ejemplo: https://manhwaweb.com/manhwa/el-asesino-de-la-luna-a-la-deriva-_1711604095685

- cuado sea una seria mostrar el nombre de la serie y los capitulos que se van descargando en forma de lista (anidada para que se sepa
    que es de una serie y el estado de capitulos individuales)

- cuando se le muestre el dialog de descarga de serie mostrar la cantidad de capitulos
- cuando se muestre el dialog de descarga de serie mostrar dos selects para que se pueda elejir de que capitulo a que 
    capitulo se quiere descargar 
- en mangadex se permite seleccionar el idioma de la serie

------------------------------------------------
- validar en linux si esta funcionando correctamente el monitoreo de clipboard
--------------------------------------------------------------------------------
caracteristicas adicionales 8:
- Tener un toggle en descargas que nos permita continuar descargas al abrir la pestaña de descargas
- Las descargas marcadas como descargas ( "status": "completed",) no deben continuar asi la carpeta no exista o falten archivos en la carpeta (asi el toggle este on),
    puede significar que el usuario ya la elimino o corto a otro loado, 
- cuando el toggle este off se debe tener un incono de continuar descarga en descargas incompletas


fixes:
en la vista explorer, cuando un archivo esta dentro de una carpeta pero esta carpeta no es la carpeta final (hay mas carpetas al mismo nivel que el archivo), se le da play, intenta
cargar en el visor todas las imagenes (de las carpetas a su nivel)
si un archivo esta dentro de una carpeta pero tiene mas carpetas al mismo nivel, si se le da play  se debe ver el contenido de la carpeta actual no las subcarpeta
recursivamente, ni con el boton play ni con el click en el archivo

--------------
optimizaciones realizadas (RESUELTO):
- Optimizado GetLibrary() para usar datos guardados en lugar de reescanear recursivamente cada carpeta
- Optimizado GetSubfolders() para usar escaneo shallow (solo directorio inmediato) en lugar de recursivo completo
- Optimizado AddSeries() para evitar escaneos redundantes de directorios ya escaneados
- Optimizado GetSeries() para usar FindFirstImageShallow() primero antes de hacer escaneo recursivo completo
- Implementado file watching con fsnotify para detectar cambios en sistema de archivos del explorer
- El explorer ahora se actualiza automáticamente cuando se agregan/eliminan carpetas externamente sin sobreescaneos
- Eliminados sobreescaneos innecesarios que causaban lentitud en bibliotecas grandes
----------------------
Caracteristicas adicionales 9:
- el explorer puede tener pestañas como las del navegador (chrome)
- estas pestañas se pueden abrir con el click centrl sobre un archivo (abrir el visor) o una carpeta, abrir un explorer
- estas pestañas se pueden cerrar con un boton X en la esquina superior derecha
- las pestañas  van integradas en la barra de titulo de la app
- las pestañas no se cerraran al cambiar de vista 
- cada pestaña tiene su propia vista y sera navegable como la vista principal
- por ahora solo se abren las pestañas desde el explorer, pero mas adelante se podran abrir desde cualquier vista (series, oneshot)
- las pestañas se abriran en la carpeta clickeada,
- validar el impacto en el rendimiento de la app
- validar el impacto en el consumo de memoria de la app
- (en conclusion una pestaña es como una nueva instancia de la app)
- las pestanas visualmente seran una copia de la pestañas de chrome con su comportamiento.
------------------------
Caracteristicas adicionales para la funcionalidad de pestañas:
- tener una fucionalidad de ahorro de memoria, que nos permita activar o descativar (con un toggle en la vista de configuracion), esto implicaria que
- si esta activo el toggle,  se desmontan las vistas de las pestañas, como se esta haciendo ahora, 
- si esta desactivado el toggle, se mantiene la vista de las pestañas, pero se debe validar el impacto en el rendimiento de la app (para evitar el flickering)
- validar si hay otra forma de evitar el flickering al cambiar de pestaña que no sea manteniendolas montadas,
- validar porque en estos momentos algunas veces requiere doble click para que la pestaña se cambie
- mejorar visualmente las pestañas para que se vean mas atractivas (mirar si necesitamos quitar la curva superior)
- validar si se pueden ver como las de chrome, paso imagen.
------------------------------------------------------------
tenemos otra situacion cuando estoy en el explorador tenemos una funcionalidad que permite con el click medio abrir una nueva pestaña con la carpeta o imagen que se clickeada
cuando yo le doy a una carpeta click medio abre la otra pestaña con el contenido, eso esta bien y la pestaña actual queda donde estaba eso esta bien, 
pero en la segunda pestaña cuando le doy click para abrir la imagen con el visor, la primera pestaña se va a root del explorer (deberia quedarse donde esta
ya que no se esta interactuando con esa pestaña si no con la segunda)

al darle click con el boton medio a una de las carpetas raiz abre la subcarpeta en otra pestaña, pero al darle click con el boton medio a una subcarpeta de la nueva pestaña
no se abre una nueva pestaña,
tenemos estas dos cosas para mirar 


----------------------------------------------------------------------

Vamos a mejorar otro comportamiento, a medida que se abren pestañas, y se va llenando la barra las pestañas deberian comprimirse, como hacen los  navegadores
hasta quedar la x solamente, ahora parece que se estan ocultando

cuando las pestañas se van cerrando,  y liberando espacio las restantes debe ir tomando su tamaño, hasta llegar al original
--- 
vamos a crear una nueva configuracion(Continue where you left off) que permita cuando este activa mantener las pestañas abiertas
cuando este inactiva inicia como se esta haciendo ahora
esta configuracion debe persistir y quedar en la pestaña de configuracion en la seccion de pestañas

//
//-----------------------------
pendiente, las pestañas si se estan restaurando
no se carga  la ubicacion anterior de la pestaña (subcarpeta)
no se restaura el visor queda cargando 
si se restaura la cantida de pestañas y los titulos (los titulos no representan el contenido)

-----------------------
validar que se esten guardando la posiciones de los visores independiente (cuando hay mas de un visor)
validar que se guarde la pagina y pixeles de la imagen (para que al recargar el scroll no se ponga a hacer scroll y carge directamente la imagen y la posicion )
validar que los scroll (y sus tabs se guarden con sus respectivos ids) no se guarde solo el visor activo
validar porque el scroll es lazy load haciendo scroll hacia abajo  pero cuando carga en una posicion baja no es lazy load haci arriba (carga todas las imagnes haci arriba)
o sea que si quedo en la pagina mil cuando vuelva va a cargar mil imagenes
ejemplo cuando se sale de la app queda en la pagina 29 en el visor cuando se vuevle a inciar la imagen esta en la pagin 22 y e indicador dice 2/29
intentemos no poner delays y setTimeout, 